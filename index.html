<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Amazing Historical Payroll of Computer Geniuses!</title>
    <style>
        body {
            background-color: #2d6a4f;
            color: white;
            font-family: Arial, sans-serif;
        }

        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            text-align: center;
        }

        .ndata {
            text-align: right;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #dlgConfirmCancel, #btnConfirm, #btnCancel, #dlgAreYouSure, #btnYes, #btnNo {
            border-radius: 10px;
        }

        #dlgConfirmCancel, #dlgAreYouSure {
            background-color: lightgrey;
        }

        #btnConfirm, #btnYes {
            background-color: neongreen;
            color: white;
        }

        #btnCancel, #btnNo {
            background-color: red;
        }

        .dlgbuttons {
            display: flex;
            justify-content: space-evenly;
        }

        .green-shades {
            background: linear-gradient(to right, #32cd32, #00ff00, #228b22);
        }

        img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>The Amazing Historical Payroll of Computer Geniuses!</h2>
        <table>
            <thead>
                <tr>
                    <td>Employee No.</td>
                    <td>Employee Name</td>
                    <td>Gender</td>
                    <td>Days Worked</td>
                    <td>Daily Rate</td>
                    <td>Gross Pay</td>
                    <td>Deduction</td>
                    <td>Net Pay</td>
                    <td>Action</td>
                </tr>
            </thead>
            <tbody id="tablebody">
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4">Total</td>
                    <td id="tGrossPay" class="ndata">0.00</td>
                    <td id="tDeduction" class="ndata">0.00</td>
                    <td id="tNetPay" class="ndata">0.00</td>
                </tr>
            </tfoot>
        </table>
        <div>
            <label>Delete Emp. No.</label>
            <input id="delemployee" type="number">
            <button id="btndelete">Delete</button>
            <button id="btndeleteall">Delete All</button>
        </div>  
    </div>

    <dialog id="dlgConfirmCancel">
        <form method="dialog">
            <h4 id="dlgmsg"></h4>
            <div class="dlgbuttons">
                <button id="btnConfirm" value="confirm">Confirm</button>
                <button id="btnCancel" value="cancel">Cancel</button>
            </div>
        </form>
    </dialog>

    <dialog id="dlgAreYouSure">
        <form method="dialog">
            <h4 id="dlgmsg2"></h4>
            <div class="dlgbuttons">
                <button id="btnYes" value="yes">Yes</button>
                <button id="btnNo" value="no">No</button>
            </div>
        </form>
    </dialog>

    <script>
        var payroll = [];
        let employeeID = 1;

        function generateDeduction() {
            const deductions = [
                { amount: 100, reason: "SSS" },
                { amount: 200, reason: "Car Loan" },
                { amount: 50, reason: "Late" },
                { amount: 300, reason: "Tax" }
            ];
            return deductions[Math.floor(Math.random() * deductions.length)];
        }

        function addEmployees() {
            payroll = [];
            
            let employees = [
                { name: "John Von Neumann", gender: "Male", daysworked: 10, dailyrate: 500 },
                { name: "Charles Babbage", gender: "Male", daysworked: 12, dailyrate: 600 },
                { name: "Ada Lovelace", gender: "Female", daysworked: 15, dailyrate: 550 },
                { name: "Alan Turing", gender: "Male", daysworked: 14, dailyrate: 700 }
            ];

            employees.forEach(emp => {
                let deduction = generateDeduction();
                let grosspay = emp.daysworked * emp.dailyrate;
                let netpay = grosspay - deduction.amount;

                payroll.push({
                    id: employeeID++,
                    name: emp.name,
                    gender: emp.gender,
                    daysworked: emp.daysworked,
                    dailyrate: emp.dailyrate,
                    grosspay: grosspay.toFixed(2),
                    deduction: deduction.amount.toFixed(2),
                    deductionReason: deduction.reason,
                    netpay: netpay.toFixed(2),
                    img: "https://via.placeholder.com/50"
                });
            });
        }

        function showEmployees() {
            let tb = "", tgpay = 0.00, tded = 0.00, tnetpay = 0.00;
            let lno = 1;

            payroll.forEach(emp => {
                tb += `<tr>
                    <td class="ndata">${emp.id}</td>
                    <td><img src="${emp.img}" alt="Employee Image"> ${emp.name}</td>
                    <td>${emp.gender}</td>
                    <td class="ndata">${emp.daysworked}</td>
                    <td class="ndata">${emp.dailyrate}</td>
                    <td class="ndata">${emp.grosspay}</td>
                    <td class="ndata">${emp.deduction} (${emp.deductionReason})</td>
                    <td class="ndata">${emp.netpay}</td>
                    <td><button onclick="editEmployee(${emp.id})">Edit</button>
                        <button onclick="deleteEmployee(${emp.id})">Delete</button></td>
                </tr>`;

                tgpay += parseFloat(emp.grosspay);
                tded += parseFloat(emp.deduction);
                tnetpay += parseFloat(emp.netpay);
                lno++;
            });

            document.getElementById("tablebody").innerHTML = tb;
            document.getElementById("tGrossPay").innerHTML = tgpay.toFixed(2);
            document.getElementById("tDeduction").innerHTML = tded.toFixed(2);
            document.getElementById("tNetPay").innerHTML = tnetpay.toFixed(2);
        }

        function editEmployee(id) {
            let emp = payroll.find(emp => emp.id === id);
            let newName = prompt("Edit employee name", emp.name);
            if (newName) {
                emp.name = newName;
                showEmployees();
            }
        }

        function deleteEmployee(id) {
            let emp = payroll.find(emp => emp.id === id);
            document.getElementById("dlgmsg").innerHTML = `Delete employee ${emp.name}?`;
            document.getElementById("dlgConfirmCancel").showModal();

            document.getElementById("btnConfirm").onclick = () => {
                payroll = payroll.filter(emp => emp.id !== id);
                showEmployees();
                document.getElementById("dlgConfirmCancel").close();
            };
        }

        document.getElementById("btndeleteall").addEventListener("click", () => {
            document.getElementById("dlgmsg").innerHTML = "Delete all records?";
            document.getElementById("dlgConfirmCancel").showModal();

            document.getElementById("btnConfirm").onclick = () => {
                payroll = [];
                showEmployees();
                document.getElementById("dlgConfirmCancel").close();
            };
        });

        document.addEventListener("DOMContentLoaded", () => {
            addEmployees();
            showEmployees();
        });
    </script>
</body>
</html>
