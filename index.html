<!DOCTYPE html>
<html>
  <style>
    table,
    tr,
    tfoot,
    td {
      border: 1px solid black;
    }

    .ndata {
      text-align: right;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #e0ffe0; /* Light green background */
      padding: 20px;
    }

    h2 {
      color: #006400; /* Dark green color */
    }

    td {
      padding: 10px;
    }

    img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }

    input[type="number"],
    input[type="text"],
    button {
      padding: 10px;
      margin: 5px;
      font-size: 1rem;
      border-radius: 5px;
    }

    input[type="number"],
    input[type="text"] {
      width: 120px;
    }

    button {
      cursor: pointer;
    }

    .add-form {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #006400;
      background-color: #f0fff0;
      border-radius: 10px;
    }
  </style>

  <body>
    <div class="container">
      <h2>The Amazing Historical Payroll of Computer Geniuses!</h2>

      <table>
        <thead>
          <tr>
            <td>Employee No.</td>
            <td>Employee Name</td>
            <td>Picture</td>
            <td>Days Worked</td>
            <td>Daily Rate</td>
            <td>Gross Pay</td>
            <td>Deduction</td>
            <td>Net Pay</td>
            <td>Actions</td>
          </tr>
        </thead>
        <tbody id="tablebody"></tbody>
        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td id="tGrossPay" class="ndata">0.00</td>
            <td id="tDeduction" class="ndata">0.00</td>
            <td id="tNetPay" class="ndata">0.00</td>
            <td></td>
          </tr>
        </tfoot>
      </table>

      <!-- Add Employee Form -->
      <div class="add-form">
        <h3>Add New Employee</h3>
        <label for="name">Name:</label>
        <input id="name" type="text" placeholder="Enter name" />
        <br />
        <label for="image">Image URL:</label>
        <input id="image" type="text" placeholder="Enter image URL" />
        <br />
        <label for="daysWorked">Days Worked:</label>
        <input id="daysWorked" type="number" placeholder="Enter days worked" />
        <br />
        <label for="dailyRate">Daily Rate:</label>
        <input id="dailyRate" type="number" placeholder="Enter daily rate" />
        <br />
        <label for="deduction">Deduction:</label>
        <input id="deduction" type="number" placeholder="Enter deduction" />
        <br />
        <button onclick="addEmployee()">Add Employee</button>
      </div>
    </div>

    <script>
      let payroll = [];

      function addEmployees() {
        payroll = []; // Initialize payroll

        payroll.push({
          name: "John Von Neumann",
          image: "https://via.placeholder.com/50",
          daysworked: 10.0,
          dailyrate: 500.0,
          deduction: 100.0,
        });

        payroll.push({
          name: "Charles Babbage",
          image: "https://via.placeholder.com/50",
          daysworked: 12.0,
          dailyrate: 600.0,
          deduction: 200.0,
        });

        payroll.push({
          name: "Ada Lovelace",
          image: "https://via.placeholder.com/50",
          daysworked: 15.0,
          dailyrate: 550.0,
          deduction: 150.0,
        });

        payroll.push({
          name: "Alan Turing",
          image: "https://via.placeholder.com/50",
          daysworked: 20.0,
          dailyrate: 700.0,
          deduction: 300.0,
        });
      }

      function calculatePays(employee) {
        employee.grosspay = (employee.daysworked * employee.dailyrate).toFixed(2);
        employee.netpay = (employee.grosspay - employee.deduction).toFixed(2);
      }

      function showEmployees() {
        let tableBody = "";
        let lno = 1;

        for (let emp of payroll) {
          calculatePays(emp);

          tableBody += `<tr>
              <td>${lno}</td>
              <td>${emp.name}</td>
              <td><img src="${emp.image}" alt="${emp.name}" /></td>
              <td>${emp.daysworked}</td>
              <td>${emp.dailyrate}</td>
              <td>${emp.grosspay}</td>
              <td>${emp.deduction}</td>
              <td>${emp.netpay}</td>
              <td>
                <button onclick="editEmployee(${lno - 1})">Edit</button>
                <button onclick="deleteEmployee(${lno - 1})">Delete</button>
                <button onclick="downloadImage('${emp.image}', '${emp.name}')">Download Image</button>
              </td>
            </tr>`;
          lno++;
        }

        document.getElementById("tablebody").innerHTML = tableBody;
      }

      function addEmployee() {
        const name = document.getElementById("name").value;
        const image = document.getElementById("image").value;
        const daysWorked = parseFloat(document.getElementById("daysWorked").value);
        const dailyRate = parseFloat(document.getElementById("dailyRate").value);
        const deduction = parseFloat(document.getElementById("deduction").value);

        if (name && image && !isNaN(daysWorked) && !isNaN(dailyRate) && !isNaN(deduction)) {
          payroll.push({
            name: name,
            image: image,
            daysworked: daysWorked,
            dailyrate: dailyRate,
            deduction: deduction,
          });
          showEmployees();

          // Clear input fields
          document.getElementById("name").value = "";
          document.getElementById("image").value = "";
          document.getElementById("daysWorked").value = "";
          document.getElementById("dailyRate").value = "";
          document.getElementById("deduction").value = "";
        } else {
          alert("Please fill out all fields correctly!");
        }
      }

      function editEmployee(index) {
        const emp = payroll[index];
        const newName = prompt("Edit Name:", emp.name);
        const newDaysWorked = prompt("Edit Days Worked:", emp.daysworked);
        const newDailyRate = prompt("Edit Daily Rate:", emp.dailyrate);
        const newDeduction = prompt("Edit Deduction:", emp.deduction);

        if (newName) emp.name = newName;
        if (!isNaN(newDaysWorked)) emp.daysworked = parseFloat(newDaysWorked);
        if (!isNaN(newDailyRate)) emp.dailyrate = parseFloat(newDailyRate);
        if (!isNaN(newDeduction)) emp.deduction = parseFloat(newDeduction);

        showEmployees();
      }

      function deleteEmployee(index) {
        payroll.splice(index, 1);
        showEmployees();
      }

      function downloadImage(url, name) {
        const link = document.createElement("a");
        link.href = url;
        link.download = `${name.replaceAll(" ", "_")}_image.jpg`;
        link.click();
      }

      document.addEventListener("DOMContentLoaded", () => {
        addEmployees();
        showEmployees();
      });
    </script>
  </body>
</html>
